<!DOCTYPE html>
<html lang="zh-cn">
  <head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="noodp"/>
  <meta name="author" content="leiheng">
  
  
  
  
  <link rel="next" href="https://leiheng.github.io/posts/docker/https-for-harbor/" />
  <link rel="canonical" href="https://leiheng.github.io/posts/tools/git-note/" />
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">
  <title>
       
       
           Git Note | Ray&#39;s Blog
       
  </title>
  <meta name="title" content="Git Note | Ray&#39;s Blog">
    
  
  <link rel="stylesheet" href="/font/iconfont.css">
  <link rel="stylesheet" href="/css/main.min.css">


  
  
 

<script type="application/ld+json">
 "@context" : "http://schema.org",
    "@type" : "BlogPosting",
    "mainEntityOfPage": {
         "@type": "WebPage",
         "@id": "https:\/\/leiheng.github.io"
    },
    "articleSection" : "posts",
    "name" : "Git Note",
    "headline" : "Git Note",
    "description" : "Add git 创建并添加ssh key git config --global user.name \x26quot;leiheng\x26quot; git config --global user.email \x26quot;heng.lei@XXX.com\x26quot; ssh-keygen -t rsa -C \x26quot;heng.lei@XXX.com\x26quot; 但是如果要在电脑上添加自己的github accout，refer this ssh-add error refer this final: git clone git@git-personal:leiheng\\repo final: git clone",
    "inLanguage" : "zh-cn",
    "author" : "leiheng",
    "creator" : "leiheng",
    "publisher": "leiheng",
    "accountablePerson" : "leiheng",
    "copyrightHolder" : "leiheng",
    "copyrightYear" : "2019",
    "datePublished": "2019-07-05 00:00:00 \x2b0000 UTC",
    "dateModified" : "2019-07-05 00:00:00 \x2b0000 UTC",
    "url" : "https:\/\/leiheng.github.io\/posts\/tools\/git-note\/",
    "wordCount" : "862",
    "keywords" : [ "git", "Ray\x27s Blog"]
}
</script>

</head>

  


  <body class="">
    <div class="wrapper">
        <nav class="navbar">
    
        <div class="top-scroll-bar"></div>
    
    <div class="container">
        <div class="navbar-header header-logo">
            
            <span class="logo_mark" >></span>
            <a href="https://leiheng.github.io">
                <span class="logo_text" >$ cd /home/ </span>
                <span class="logo_cursor" ></span>
            </a>
            
        </div>
        <div class="navbar-right">
                
                <span class="menu">
                
                <a class="menu-item" href="/posts/" title="">Blog</a>
                
                <a class="menu-item" href="/categories/" title="">Categories</a>
                
                <a class="menu-item" href="/tags/" title="">Tags</a>
                
                <a class="menu-item" href="/about/" title="">About</a>
                
                </span>
                <a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-dark-mode"></i></a>
        </div>
    </div>
</nav>
<nav class="navbar-mobile" id="nav-mobile" style="display: none">
     
         <div class="top-scroll-bar"></div>
     
     <div class="container">
        <div class="navbar-header">
            <div class="header-logo">
                
                    <span class="logo_mark">></span>
                    <a href="https://leiheng.github.io">
                        <span class="logo_text">$ cd /home/ </span>
                        <span class="logo_cursor"></span>
                </a>
                
            </div>
            <div class="navbar-right">
                <a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-dark-mode"></i></a>
                <div class="menu-toggle">
                    <span></span><span></span><span></span>
                </div>
            </div>
        </div>
     
          <div class="menu" id="mobile-menu">
                
                
                <a class="menu-item" href="/posts/" title="">Blog</a>
                
                <a class="menu-item" href="/categories/" title="">Categories</a>
                
                <a class="menu-item" href="/tags/" title="">Tags</a>
                
                <a class="menu-item" href="/about/" title="">About</a>
                
        </div>
    </div>
</nav>
    	 <main class="main">
          <div class="container">
      		
<article class="post-warp" itemscope itemtype="http://schema.org/Article">
    <header class="post-header">
        <h1 class="post-title" itemprop="name headline">Git Note</h1>
        <div class="post-meta">
                Written by <a itemprop="name" href="https://leiheng.github.io" rel="author">leiheng</a> with ♥ 
                <span class="post-time">
                on <time datetime=2019-07-05 itemprop="datePublished">July 5, 2019</time>
                </span>
                in
                <i class="iconfont icon-folder"></i>
                <span class="post-category">
                        <a href="https://leiheng.github.io/categories/tools/"> tools </a>
                        
                </span>
                <span class="post-word-count">, 862 words</span>
        </div>
    </header>
    <div class="post-content">
        

        
        
        
     
          
          
          

          
          
          

          

<h2 id="add-git">Add git</h2>

<hr />

<p>创建并添加ssh key</p>

<pre><code class="language-bash">git config --global user.name &quot;leiheng&quot;
git config --global user.email &quot;heng.lei@XXX.com&quot;
ssh-keygen -t rsa -C &quot;heng.lei@XXX.com&quot;
</code></pre>

<p>但是如果要在电脑上添加自己的github accout，refer <a href="https://code.tutsplus.com/tutorials/quick-tip-how-to-work-with-github-and-multiple-accounts--net-22574" rel="nofollow noreferrer" target="_blank">this</a></p>

<p><code>ssh-add error</code> refer <a href="https://unix.stackexchange.com/questions/48863/ssh-add-complains-could-not-open-a-connection-to-your-authentication-agent/48868#48868" rel="nofollow noreferrer" target="_blank">this</a></p>

<p>final: <code>git clone git@git-personal:leiheng\repo</code></p>

<p>final: <code>git clone git@github.com:leiheng\repo</code></p>

<hr />

<h4 id="change-auth">change auth</h4>

<p>我有段时间一直很困惑为啥我提交了东西, 但是contribution 那张表上面没有我的历史呢. 于是发现了有个commit email 的设置, 可以在GitHub上改成你全局的user email, 也可以在单个repo里面改autor:</p>

<pre><code class="language-bash">git clone repo
cd repo # then set user email, dont need unset global settings
git config user.email &quot;ray.leiheng@qq.com&quot;
git config user.name &quot;leih&quot;
</code></pre>

<p>我 gitlab 和 github 还有公司github都不是一个账号, 所以emmmm, 就先这样吧.</p>

<h2 id="配置了-gitignore-但是并没有起作用">配置了<code>.gitignore</code>但是并没有起作用</h2>

<hr />

<p><strong>method:</strong></p>

<pre><code class="language-bash">git rm --cached *.class
git commit -m &quot;add gitignore file&quot;
</code></pre>

<h2 id="good-habit">Good Habit</h2>

<hr />

<ul>
<li>本地新建分支，然后merge到master上去，用master作为提pr的branch</li>
<li><del>开始写代码之前rebase代码</del>

<ul>
<li>rebase before or after change does not matter, the point is, do not rebase branch which other guys or other mechine working on it.</li>
</ul></li>
<li>在add之前，看status<code>git status</code></li>
<li>在add之前，看diff <code>git diff</code> 最好看diff是用<strong>source tree</strong></li>
<li>注意<strong>编码</strong>；github上是LF，win上是CRLF <strong>坑注意</strong></li>
<li>can use <code>git option --help</code></li>
</ul>

<h2 id="rebase">Rebase</h2>

<hr />

<pre><code class="language-bash">git fetch upstream
//rebase branch which you want, most is default branch
// Do not rebase branch which other guy work on it
git rebase upstream/master
...
//if not use rebase, use pull also a good choice but cause a merge node created
git pull origin master
</code></pre>

<h2 id="commit相关">Commit相关</h2>

<hr />

<ul>
<li>前提</li>
</ul>

<blockquote>
<ul>
<li>多个commit合并成一个commit(这些&rsquo;多个commit&rsquo;指只做一件事的commit)</li>
<li>pr 尽可能的细</li>
<li>一个pr，一个分支只能做一件事</li>
<li>file change 最好不要超过10个</li>
<li><code>git commit --amend --no-edit</code> 补提交，但不增加commit 节点 <strong>love it</strong></li>
<li><code>git commit --amend</code> change your commit msg</li>
</ul>
</blockquote>

<pre><code class="language-bash">git reset 某次commit的id
相当于
git reset --soft HEAD~
</code></pre>

<h2 id="拉pr到本地分支">拉pr到本地分支</h2>

<hr />

<pre><code class="language-bash">git fetch origin pull/1941/head:repack-org-apache
git checkout repack-org-apache
</code></pre>

<blockquote>
<p>在checkout之前不要手动创建这个<code>repack-org-apache</code>分支
<a href="https://www.huangyunkun.com/2018/06/15/pull-github-pr-to-local-branch/" rel="nofollow noreferrer" target="_blank">refer</a></p>
</blockquote>

<h2 id="git-stash">git stash</h2>

<hr />

<ul>
<li>git stash</li>
<li>git stash apply</li>
<li>git stash pop</li>
</ul>

<h2 id="submodule">Submodule</h2>

<hr />

<p><code>git submodule add url folder</code>
在一个module里面添加ignore的submodule，顺序是很重要的。
我在其中还看到了empty repo的一些特性。
1. submodule remote repo 不能为空
2. <code>.gitignore</code> 必须在添加完 submodule 之后才能把这个 folder 添加上去，要是之前就添上去了咋搞，指路<code>git rm --cached</code>
3. update submodule 指路 <code>git submodule --help</code></p>

<h2 id="git-de-bug-bisect-https-git-scm-com-book-zh-v1-git-e5-b7-a5-e5-85-b7-e4-bd-bf-e7-94-a8-git-e8-b0-83-e8-af-95">Git de-bug <em>bisect</em><a href="https://git-scm.com/book/zh/v1/Git-%E5%B7%A5%E5%85%B7-%E4%BD%BF%E7%94%A8-Git-%E8%B0%83%E8%AF%95" rel="nofollow noreferrer" target="_blank">!!!</a></h2>

<hr />

<ol>
<li><code>git bisect start</code></li>
<li><code>git bisect bad</code></li>
<li><code>git bisect good [good commit]</code></li>
<li>find it and fixed. use <code>git bisect reset</code> return the begin</li>
</ol>

<h2 id="remote-repo">Remote repo</h2>

<hr />

<ol>
<li>remote repo 不能为空, empty repo cannot be created</li>
</ol>

<h2 id="refer">REFER</h2>

<ul>
<li><a href="https://git-scm.com/book/zh/v1/Git-%E5%B7%A5%E5%85%B7-%E5%82%A8%E8%97%8F%EF%BC%88Stashing%EF%BC%89" rel="nofollow noreferrer" target="_blank">refer</a></li>
<li><a href="https://git-scm.com/book/zh/v1/Git-%E5%B7%A5%E5%85%B7-%E4%BD%BF%E7%94%A8-Git-%E8%B0%83%E8%AF%95" rel="nofollow noreferrer" target="_blank">git bisect</a></li>
<li><a href="https://git-scm.com/book/zh/v1/Git-%E5%B7%A5%E5%85%B7-%E5%AD%90%E6%A8%A1%E5%9D%97" rel="nofollow noreferrer" target="_blank">submodule</a></li>
</ul>

    </div>

    <div class="post-copyright">
             
            <p class="copyright-item">
                <span>Author:</span>
                <span>leiheng </span>
                </p>
            
           
             
            <p class="copyright-item">
                    <span>Link:</span>
                    <a href=https://leiheng.github.io/posts/tools/git-note/>https://leiheng.github.io/posts/tools/git-note/</span>
            </p>
            
             
            <p class="copyright-item lincese">
                本文采用<a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/" target="_blank">知识共享署名-非商业性使用 4.0 国际许可协议</a>进行许可
            </p>
            
    </div>

  
    <div class="post-tags">
        
            <section>
            <i class="iconfont icon-tag"></i>Tag(s): 
            
            <span class="tag"><a href="https://leiheng.github.io/tags/git/">
                    #git</a></span>
            
            </section>
        
        <section>
                <a href="javascript:window.history.back();">back</a></span> · 
                <span><a href="https://leiheng.github.io">home</a></span>
        </section>
    </div>

    <div class="post-nav">
         
        
        <a href="https://leiheng.github.io/posts/docker/https-for-harbor/" class="next" rel="next" title="Https for Harbor">Https for Harbor&nbsp;<i class="iconfont icon-right"></i></a>
        
    </div>

</article>
          </div>
		   </main>
      <footer class="footer">
    <div class="copyright">
        &copy;
        
        <span itemprop="copyrightYear">2019 - 2019</span>
        
        <span class="with-love">
    	 <i class="iconfont icon-love"></i> 
         </span>
         
            <span class="author" itemprop="copyrightHolder"><a href="https://leiheng.github.io">leiheng</a> | </span> 
         

         
		  <span>Powered by <a href="https://gohugo.io/" target="_blank" rel="external nofollow">Hugo</a> & <a href="https://github.com/liuzc/leaveit" target="_blank" rel="external nofollow">LeaveIt</a></span> 
    </div>
</footer>












    
    
    <script src="/js/vendor_no_gallery.min.js" async=""></script>
    
  



     </div>
  </body>
</html>
